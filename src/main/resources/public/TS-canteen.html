<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>网站后台管理模版</title>
    <link rel="stylesheet" type="text/css"
          href="assets/admin/layui/css/layui.css" />
    <link rel="stylesheet" type="text/css" href="assets/admin/css/admin.css" />
</head>

<body>
<div class="page-content-wrap" id="canteenSearch">
    <h5 style="text-align:center;font-size: 20px;line-height: 25px;color:#666">食堂基本信息管理</h5>
    <hr>
    <div class="layui-form-item">
        <div class="layui-inline">
            <input type="text" id="canteenNameSearch" placeholder="请输入食堂名称"
                   autocomplete="off" class="layui-input">
        </div>
        <button class="layui-btn layui-btn-normal site-demo-active"
                data-type="search" id="searchCanteen">搜索</button>
        <table class="layui-table"
               lay-data="{ url:'/canteen/getAllCanteens', page:true, id:'idTest'}"
               lay-filter="demo">
            <thead>
            <tr>
                <th lay-data="{type:'checkbox', }"></th>
                <th lay-data="{field:'canteenid',sort: true}">食堂编号</th>
                <th lay-data="{field:'canteenname'}">食堂名称</th>
                <th lay-data="{field:'location'}">食堂地址</th>
                <th lay-data="{field:'description'}">食堂简介</th>
                <th lay-data="{field:'starttime'}">食堂开始营业时间</th>
                <th lay-data="{field:'endtime'}">食堂结束营业时间</th>
            </tr>
            </thead>
        </table>
    </div>

    <hr></hr>
    <h5 style="text-align: center;">@2023.食堂基本信息管理</h5>
</div>
<script src="assets/admin/layui/layui.all.js" type="text/javascript"
        charset="utf-8"></script>
<script>
    layui.use('table', function() {
        var $ = layui.jquery
        var table = layui.table;

        //触发事件
        var active = {
            search:function(){
                var name=$("#canteenNameSearch").val();
                table.reload('idTest',{
                    method: 'POST',
                    where: {"canteenName":name},
                    page: {
                        curr: 1 //重新从第 1 页开始
                    }
                })
            }
        };

        $('#canteenSearch .layui-btn').on('click', function() {
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });

    });
</script>
</body>

</html>